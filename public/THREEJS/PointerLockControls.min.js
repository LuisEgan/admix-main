THREE.PointerLockControls=function(e){var t=this,n=!1,a=!1,o=!1,c=!1,i=!1,r=!1,s=new THREE.Vector3,d=performance.now(),m=e;m.rotation.set(0,0,0);var u=new THREE.Object3D;u.add(m);var l=new THREE.Object3D;l.position.y=0,l.add(u);var E,v,b=Math.PI/2,w=function(e){if(!1!==t.enabled){var n=e.movementX||e.mozMovementX||e.webkitMovementX||0,a=e.movementY||e.mozMovementY||e.webkitMovementY||0;l.rotation.y-=.002*n,u.rotation.x-=.002*a,u.rotation.x=Math.max(-b,Math.min(b,u.rotation.x))}};this.noRotation=function(){document.removeEventListener("mousemove",w,!1)},this.yesRotation=function(){document.addEventListener("mousemove",w,!1)},document.addEventListener("wheel",function(e){e.deltaY<0?n=!0:e.deltaY>0?a=!0:(n=!1,a=!1)},!1),document.addEventListener("mousemove",w,!1),document.addEventListener("mouseup",function(e){t.enabled=!1},!1),document.addEventListener("mousedown",function(e){console.log("event.which: ",e.which),t.enabled=!0},!1),document.addEventListener("keydown",function(e){if("input"!=(e.target||e.srcElement).nodeName.toLowerCase())switch(e.keyCode){case 38:case 87:n=!0;break;case 37:case 65:o=!0;break;case 40:case 83:a=!0;break;case 39:case 68:c=!0;break;case 81:i=!0;break;case 69:r=!0}},!1),document.addEventListener("keyup",function(e){switch(e.keyCode){case 38:case 87:n=!1;break;case 37:case 65:o=!1;break;case 40:case 83:a=!1;break;case 39:case 68:c=!1;break;case 81:i=!1;break;case 69:r=!1}},!1),this.enabled=!1,this.getObject=function(){return l},this.getDirection=(E=new THREE.Vector3(0,0,-1),v=new THREE.Euler(0,0,0,"YXZ"),function(e){return v.set(u.rotation.x,l.rotation.y,0),e.copy(E).applyEuler(v),e}),this.update=function(){var e=performance.now(),m=(e-d)/1e3;s.x-=3*s.x*m,s.z-=3*s.z*m,s.y-=3*s.y*m;var u=new THREE.Vector3;n&&(u=t.getDirection(u),s.add(u.multiplyScalar(.5*m))),a&&(u=t.getDirection(u),s.add(u.multiplyScalar(-.5*m))),o&&((u=t.getDirection(u)).cross(new THREE.Vector3(0,1,0)).normalize(),s.add(u.multiplyScalar(-.5*m))),c&&((u=t.getDirection(u)).cross(new THREE.Vector3(0,1,0)).normalize(),s.add(u.multiplyScalar(.5*m))),i&&(u.set(0,1,0),s.add(u.multiplyScalar(.5*m))),r&&(u.set(0,1,0),s.add(u.multiplyScalar(-.5*m))),t.getObject().position.add(s),d=e}};