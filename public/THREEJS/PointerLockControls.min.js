THREE.PointerLockControls=function(e,{iYawX:t,iYawY:n,iYawZ:o,iYawRot:a,iPitchRot:i}){var c=this,r=Math.PI/2,d=!1,s=!1,u=!1,m=!1,l=!1,v=!1,E=!1,w=!1,p=new THREE.Vector3,h=performance.now(),y=e;y.rotation.set(0,0,0);var b=new THREE.Object3D;b.rotation.x=i,b.add(y);var f=new THREE.Object3D;f.position.x=t,f.position.y=n,f.position.z=o,f.rotation.y=a,f.add(b);var k,L,R=function(e){e.preventDefault(),e.deltaY<0?d=!0:e.deltaY>0?s=!0:(d=!1,s=!1)},Y=function(e){if(!1!==c.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;c.wheelClick?(document.body.style.cursor="move",t>0?(v=!1,l=!0):t<0&&(l=!1,v=!0),n>0?(w=!1,E=!0):n<0&&(E=!1,w=!0)):(f.rotation.y-=.002*t,b.rotation.x-=.002*n,b.rotation.x=Math.max(-r,Math.min(r,b.rotation.x)))}},g=function(e){c.wheelClick&&(document.body.style.cursor="default"),c.enabled=!1,c.wheelClick=!1,v=!1,l=!1,E=!1,w=!1},D=function(e){e.preventDefault(),c.enabled=!0,2===e.which&&(c.wheelClick=!0)},H=function(e){if(e.preventDefault(),e.stopImmediatePropagation(),"input"!=(e.target||e.srcElement).nodeName.toLowerCase())switch(e.keyCode){case 38:case 87:u=!0;break;case 37:case 65:l=!0;break;case 40:case 83:m=!0;break;case 39:case 68:v=!0;break;case 81:E=!0;break;case 69:w=!0}},T=function(e){switch(e.keyCode){case 38:case 87:u=!1;break;case 37:case 65:l=!1;break;case 40:case 83:m=!1;break;case 39:case 68:v=!1;break;case 81:E=!1;break;case 69:w=!1}};this.setRelativeRotationObj=function(e,t){f.position.y=t},this.noRotation=function(){document.removeEventListener("mousemove",Y,!1),document.removeEventListener("wheel",R,!1)},this.yesRotation=function(){document.addEventListener("mousemove",Y,!1),document.addEventListener("wheel",R,!1)},this.dispose=function(){document.removeEventListener("wheel",R,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("mousedown",D,!1),document.removeEventListener("keydown",H,!1),document.removeEventListener("keyup",T,!1)},this.enable=function(){document.addEventListener("wheel",R,!1),document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("mousedown",D,!1),document.addEventListener("keydown",H,!1),document.addEventListener("keyup",T,!1)},document.addEventListener("wheel",R,!1),document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("mousedown",D,!1),document.addEventListener("keydown",H,!1),document.addEventListener("keyup",T,!1),this.enabled=!1,this.getYawObject=function(){return f},this.getPitchObject=function(){return b},this.setYawObject=function(e,t,n){f=new THREE.Vector3(e,t,n)},this.getDirection=(k=new THREE.Vector3(0,0,-1),L=new THREE.Euler(0,0,0,"YXZ"),function(e){return L.set(b.rotation.x,f.rotation.y,0),e.copy(k).applyEuler(L),e}),this.update=function(){var e=performance.now(),t=(e-h)/1e3,n=d||s?18:5;p.x-=10*p.x*t,p.z-=10*p.z*t,p.y-=10*p.y*t;var o=new THREE.Vector3;u&&(o=c.getDirection(o),p.add(o.multiplyScalar(n*t))),d&&(o=c.getDirection(o),p.add(o.multiplyScalar(n*t)),d=!1),m&&(o=c.getDirection(o),p.add(o.multiplyScalar(-n*t))),s&&(o=c.getDirection(o),p.add(o.multiplyScalar(-n*t)),s=!1),l&&((o=c.getDirection(o)).cross(new THREE.Vector3(0,1,0)).normalize(),p.add(o.multiplyScalar(-n*t))),v&&((o=c.getDirection(o)).cross(new THREE.Vector3(0,1,0)).normalize(),p.add(o.multiplyScalar(n*t))),E&&(o.set(0,1,0),p.add(o.multiplyScalar(n*t))),w&&(o.set(0,1,0),p.add(o.multiplyScalar(-n*t))),c.getYawObject().position.add(p),h=e}};